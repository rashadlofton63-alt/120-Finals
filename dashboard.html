<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Main Store</title>
    <link rel="stylesheet" href="style.css">
    <script src="shop.js" defer></script>
</head>
<body class="dashboard">
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-title">Sugar Cube Corner</h1>
            <div class="nav-links">
                <span class="user-greeting" id="userGreeting"></span>
                <button class="button button-logout" id="logoutBtn">Logout</button>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <section class="hero">
            <h2>Welcome to Our Sweet Bakery</h2>
            <p>Delicious treats made fresh daily</p>
        </section>

        <section class="categories">
            <h2>Explore</h2>
            <div class="category-grid">
                <div class="category-card" onclick="goToPage('about.html')">
                    <div class="category-icon">‚ÑπÔ∏è</div>
                    <h3>About</h3>
                    <p>Learn about our bakery and story</p>
                </div>
                <div class="category-card" onclick="goToPage('menu.html')">
                    <div class="category-icon">üìú</div>
                    <h3>Menu</h3>
                    <p>View our current menu and prices</p>
                </div>
                <div class="category-card" onclick="goToPage('reservation.html')">
                    <div class="category-icon">üìÖ</div>
                    <h3>Reservation</h3>
                    <p>Book a table or special order</p>
                </div>
            </div>
        </section>

        <section class="featured">
            <h2>Featured Items</h2>
            <div class="featured-grid">
                <div class="featured-item" data-type="cake">
                    <img class="featured-img" alt="Random cake">
                    <h3>Classic Cakes</h3>
                   
                </div>
                <div class="featured-item" data-type="cookie">
                    <img class="featured-img" alt="Random cookie">
                    <h3>Cookies</h3>
                   
                </div>
                <div class="featured-item" data-type="pie">
                    <img class="featured-img" alt="Random pie">
                    <h3>Pies</h3>
                    
                </div>
            </div>
        </section>
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', function() {
            displayUserGreeting();
            
            const auth = localStorage.getItem('auth');
            if (!auth) {
                window.location.href = 'Login.html';
            }
            const mapping = [
                {type: 'cake', query: 'cake'},
                {type: 'cookie', query: 'cookie'},
                {type: 'pie', query: 'pie'}
            ];
            const cakeImages = [
                    'Cakes/1200px-Angel_food_cake_2.jpg',
                    'Cakes/Baked_cheesecake_with_raspberries_and_blueberries.jpg',
                    'Cakes/Carrot_cake_at_America_Graffiti_(cropped).jpg',
                    'Cakes/Golden-Krust-Rock-Cake.jpg',
                    'Cakes/Hummingbird_Cake_(vegan)_1.jpg',
                    'Cakes/KingCake.jpg',
                    'Cakes/Pound_cake_2.jpg',
                    'Cakes/Queen_cakes_cooling_on_a_wire_rack_(13475333725).jpg'
                ];

                const cookieImages = [
                    'Cookies/2019-11-29_14_52_43_The_interior_of_a_tin_of_McKenzie_&_Lloyds_Danish_Style_Butter_Cookies_in_the_Dulles_section_of_Sterling,_Loudoun_County,_Virginia.jpg',
                    'Cookies/960px-Rainbow_cookies_.jpg',
                    'Cookies/BandW.jpg',
                    'Cookies/Choc-Chip-Cookie.jpg',
                    'Cookies/Flies_cemetery.jpg',
                    'Cookies/Hallongrotta.JPG',
                    'Cookies/Peanut_butter_cookies,_September_2009.jpg',
                    'Cookies/VanillaMacaron.jpg'
                ];

                const pieImages = [
                    'Pies/Blackberry_pie.jpg',
                    'Pies/Buttermilk_Pie_with_Pecan_Brittle_at_Dyron\'s_Lowcountry.jpg',
                    'Pies/Chocolate_cream_pie.jpg',
                    'Pies/CoconutCustardPie.jpg',
                    'Pies/Kentucky_Chocolate_walnut_pie_slice_Derby.JPG',
                    'Pies/Lattice_apple_pie.png',
                    'Pies/Mississippi_mud_pie_(7963392610).jpg',
                    'Pies/Sugar_Cream_Pie_in_Indiana_-_Stierch.jpg'
                ];

                function pickRandom(arr) {
                    return arr[Math.floor(Math.random() * arr.length)];
                }

                const cakeEl = document.querySelector('.featured-item[data-type="cake"] .featured-img');
                const cookieEl = document.querySelector('.featured-item[data-type="cookie"] .featured-img');
                const pieEl = document.querySelector('.featured-item[data-type="pie"] .featured-img');

                if (cakeEl) {
                    cakeEl.src = pickRandom(cakeImages);
                    cakeEl.alt = 'Featured cake';
                }
                if (cookieEl) {
                    cookieEl.src = pickRandom(cookieImages);
                    cookieEl.alt = 'Featured cookie';
                }
                if (pieEl) {
                    pieEl.src = pickRandom(pieImages);
                    pieEl.alt = 'Featured pie';
                }
        });

        function displayUserGreeting() {
            const userGreeting = document.getElementById('userGreeting');
            const userData = localStorage.getItem('user');
            if (userData) {
                const user = JSON.parse(userData);
                const greeting = user.guest ? `Welcome, Guest!` : `Welcome, ${user.username}!`;
                userGreeting.textContent = greeting;
            }
        }

        function goToPage(page) {
            window.location.href = page;
        }

        document.getElementById('logoutBtn').addEventListener('click', function() {
            localStorage.removeItem('auth');
            localStorage.removeItem('user');
            window.location.href = 'Login.html';
        });
    </script>
</body>
</html>
